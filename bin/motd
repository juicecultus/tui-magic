#!/bin/bash
# Custom MOTD for IBM ThinkPad X40
# Uses basic ANSI colors (works on Linux console TERM=linux)

G='\e[32m'       # green
BG='\e[1;32m'    # bold green
DG='\e[2;32m'    # dim green
D='\e[2;37m'     # dim white
R='\e[0m'        # reset

clear
echo -e "${DG}"
figlet -f small "ThinkPad X40" 2>/dev/null || echo "  ThinkPad X40"
echo -e "${R}"

# System info
UPTIME=$(uptime -p 2>/dev/null | sed 's/up //')
CPU_TEMP=$(cat /sys/class/thermal/thermal_zone0/temp 2>/dev/null | awk '{printf "%.0f", $1/1000}')
MEM_USED=$(free -m | awk '/Mem:/ {print $3}')
MEM_TOTAL=$(free -m | awk '/Mem:/ {print $2}')
DISK_USED=$(df -h / | awk 'NR==2 {print $3"/"$2}')
LOAD=$(cat /proc/loadavg | awk '{print $1}')
IP=$(hostname -I 2>/dev/null | awk '{print $1}')

echo -e "${BG}System${R}"
echo ""
printf "  ${G}%-10s${R} %s\n" "Uptime" "$UPTIME"
printf "  ${G}%-10s${R} %s\n" "Load" "$LOAD"
if [ -n "$CPU_TEMP" ]; then
printf "  ${G}%-10s${R} %s\n" "CPU Temp" "${CPU_TEMP}Â°C"
fi
printf "  ${G}%-10s${R} %s\n" "Memory" "${MEM_USED}M / ${MEM_TOTAL}M"
printf "  ${G}%-10s${R} %s\n" "Disk /" "$DISK_USED"
printf "  ${G}%-10s${R} %s\n" "IP" "$IP"
echo ""
echo -e "${BG}Quick Launch${R}  ${D}(Ctrl-a, then key)${R}"
echo ""
printf "  ${BG}m${D} matrix    ${BG}b${D} btop      ${BG}n${D} ranger    ${BG}t${D} tig       ${BG}D${D} dashboard${R}\n"
printf "  ${BG}v${D} cava      ${BG}M${D} cmus      ${BG}c${D} calcurse  ${BG}R${D} rss       ${BG}W${D} web${R}\n"
printf "  ${BG}T${D} clock     ${BG}B${D} bonsai    ${BG}g${D} disk      ${BG}i${D} net       ${BG}w${D} wifi${R}\n"
echo ""
echo -e "  ${D}Ctrl-a then H${R}  ${G}full cheatsheet${R}"
echo ""
